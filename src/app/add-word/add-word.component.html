<div class="container">
  <div class="row">
    <form [formGroup]="addWordForm"
          (ngSubmit)="saveNewWord()"
          class="add-word-form col-lg-6 offset-lg-3 col-md-8 offset-md-2 col-sm-10 offset-sm-1 pb-0">
      <h4>Add a new word</h4>
      <div class="form-group">
        <label for="addRussianWord">Russian</label>
        <input type="text"
               class="form-control"
               id="addRussianWord"
               formControlName="rus">
      </div>
      <div class="form-group">
        <label for="addEnglishWord">English</label>
        <input type="text"
               class="form-control"
               id="addEnglishWord"
               formControlName="eng">
      </div>
      <div class="form-group">
        <label for="addDutchWord">Dutch</label>
        <input type="text"
               class="form-control"
               id="addDutchWord"
               formControlName="ned">
      </div>

      <div class="form-group">
        <label>Part of speech</label>
        <select class="form-control app-select"
                formControlName="part">
          <option *ngFor="let part of partsOfSpeech" [value]="part">{{part}}</option>
        </select>
      </div>

      <div class="form-buttons-wrapper">
        <button class="btn btn-primary" type="submit" [disabled]="!addWordForm.valid">Add word</button>
        <ng-container *ngIf="CSVImportMode">
          <button class="btn btn-default" type="button" (click)="skipWord()">Skip</button>
          <button class="btn btn-danger" type="button" (click)="quitAdding()">Quit adding from CSV</button>
        </ng-container>
      </div>
      <ng-container *ngIf="CSVImportMode">
        <p class="mt-4 mb-0">Processing word {{numberOfProcessedWords}} out of total {{totalWordsToAdd}}</p>
      </ng-container>

    </form>
  </div>

  <div class="row mt-4 mb-4">
    <div class="col-lg-6 offset-lg-3 col-md-8 offset-md-2 col-sm-10 offset-sm-1">
      <div class="custom-file" id="customFile">
        <input #file
               [(ngModel)]="currentFile"
               type="file"
               class="custom-file-input"
               id="exampleInputFile"
               aria-describedby="fileHelp"
               accept=".csv"
               (input)="fileInput($event)">
        <label class="custom-file-label" for="exampleInputFile">
          <ng-container *ngIf="selectedFilename">
            <span *ngIf="fileCorrect"><i class="icon-check text-success"></i> {{selectedFilename}}</span>
            <span *ngIf="!fileCorrect"><i class="icon-remove text-danger"></i> File cannot be read</span>
          </ng-container>
          <span *ngIf="!selectedFilename"><i class="icon-cloud-upload text-primary"></i> Select .csv file to upload words</span>
        </label>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="categories-container col-lg-6 offset-lg-3 col-md-8 offset-md-2 col-sm-10 offset-sm-1">
      <div class="card">
        <div class="card-body">
          <div class="form-group">
            <input type="text" class="form-control" #filterValue (keyup)="0" placeholder="Filter">
          </div>
          <ng-container *ngIf="categories.length">
            <span *ngFor="let category of categories | searchByObjKeys : filterValue.value : ['categoryName']"
                  class="badge badge-success category-badge"
                  [ngStyle]="{'background-color': category.color}">
              <input type="checkbox" [ngModel]="categoriesMap[category.id]">
              <label (click)="toggleCategory(category.id)">{{category.categoryName}}</label>
            </span>
          </ng-container>
          <p class="text-muted" *ngIf="!categories.length">{{loadingInProgress ? 'Loading...' : 'Not a single category has been added yet'}}</p>
        </div>
      </div>
    </div>
  </div>
</div>

